<!DOCTYPE html>
<html>
  
<head>
    <title>909上傳照片</title>
</head>

<body>
    <form id="uploadForm">
  <input type="file" id="fileInput" name="file">
  <button type="submit">Upload</button>
</form>

<div id="status"></div>

<script>
const form = document.getElementById('uploadForm');
const status = document.getElementById('status');

form.addEventListener('submit', function(e) {
  e.preventDefault(); // Prevent the normal form submission

  const fileInput = document.getElementById('fileInput');
  const file = fileInput.files[0];
  if (!file) {
    status.textContent = 'Please select a file.';
    return;
  }

  const formData = new FormData();
  formData.append('file', file);

  fetch('https://script.google.com/macros/s/AKfycbxoOSRSZgrSaLZq88Nkq5vP4-Smtfv8_AwlJkGOKzS6GdK0sc6elz5C2qXJVWcjlU4E/exec', {
    method: 'POST',
    body: formData
  })
  .then(response => response.text())
  .then(result => {
    status.textContent = 'Upload successful!';
    console.log(result); // You can see the server response here
  })
  .catch(error => {
    status.textContent = 'Upload failed.';
    console.error(error);
  });
});
</script>
    <script>
    $('#uploadfile').on("change", function() {
        var file = this.files[0];
        var fr = new FileReader();
        fr.fileName = file.name;
        fr.onload = function(e) {
            e.target.result
            html = '<input type="hidden" name="data" value="' + e.target.result.replace(/^.*,/, '') + '" >';
            html += '<input type="hidden" name="mimetype" value="' + e.target.result.match(/^.*(?=;)/)[0] + '" >';
            html += '<input type="hidden" name="filename" value="' + e.target.fileName + '" >';
            $("#data").empty().append(html);
        }
        fr.readAsDataURL(file);
    });
    </script>
</body>

</html>
