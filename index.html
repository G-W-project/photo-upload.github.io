<!DOCTYPE html>
<html>
  
<head>
    <title>909上傳照片</title>
</head>

<body>
      <form id="uploadForm">
  <input type="file" id="fileInput" name="file">
  <button type="submit">Upload</button>
</form>

<div id="status"></div>

<script>
const form = document.getElementById('uploadForm');
const status = document.getElementById('status');

form.addEventListener('submit', function(e) {
  e.preventDefault(); // prevent redirect

  const fileInput = document.getElementById('fileInput');
  const file = fileInput.files[0];
  if (!file) {
    status.textContent = 'Please select a file.';
    return;
  }

  const reader = new FileReader();
  reader.onload = function(event) {
    const base64Data = event.target.result.split(',')[1]; // remove "data:*/*;base64," prefix

    const params = new URLSearchParams();
    params.append('data', base64Data);
    params.append('filename', file.name);
    params.append('mimetype', file.type);

    fetch('https://script.google.com/macros/s/AKfycby9u2jAs9pN_YtxO4wL3wXob26RCI99P0HmX0e-qNxlewMB2nvKRIBaiUXU0eFG-g1S/exec', {
      method: 'POST',
      body: params
    })
    .then(response => response.text())
    .then(result => {
      status.innerHTML = result; // your script returns "<b>Done!</b>"
    })
    .catch(err => {
      console.error(err);
      status.textContent = 'Upload failed.';
    });
  };

  reader.readAsDataURL(file); // convert file to Base64
});
</script>
</body>

</html>
